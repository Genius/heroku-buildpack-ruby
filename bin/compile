#!/usr/bin/env bash

BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3
BIN_DIR=$(cd "$(dirname "$0")" || exit; pwd) # absolute path

bootstrap_ruby_dir=$(mktemp -d)
"$BIN_DIR"/support/download_ruby "$BIN_DIR" "$bootstrap_ruby_dir"
trap 'rm -rf "$bootstrap_ruby_dir"' EXIT

echo "-----> Ruby downloaded to: $bootstrap_ruby_dir"

# Add your debugging commands here
ls -l "$bootstrap_ruby_dir/lib/libruby.so.2.6"
file "$bootstrap_ruby_dir/lib/libruby.so.2.6"
ldd "$bootstrap_ruby_dir/lib/libruby.so.2.6"

echo "-----> All debugging commands executed. Script exiting."